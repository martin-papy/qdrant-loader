# Template for sources configuration
# Copy this file to config.yaml and customize it for your needs
# Environment variables can be used with ${VARIABLE_NAME} syntax

# Global configuration for all sources
global:
  # Qdrant configuration for tests
  qdrant:
    url: "https://4f2a12b9-a595-491c-ba55-9ae23e21e02a.europe-west3-0.gcp.cloud.qdrant.io"
    api_key: "${QDRANT_API_KEY}"
    collection_name: "qdrant_loader_test"

  # Default chunking configuration
  # Controls how documents are split into chunks for processing
  chunking:
    chunk_size: 500        # Maximum number of characters per chunk
    chunk_overlap: 50      # Number of characters to overlap between chunks
  
  # Default embedding configuration
  # Controls how text is converted to vectors
  embedding:
    endpoint: "https://api.openai.com/v1" # Optionnal. Defines the endpoint to use for embedding. Defaults to OpenAI endpoint.
    model: "text-embedding-3-small"  # Embedding model to use. Could be BAAI/bge-small-en-v1.5 (exemple for local use) or text-embedding-3-small (for OpenAI use)
    batch_size: 100                  # Number of chunks to process in one batch
    vector_size: 1536                # Optionnal. Vector size for the embedding model (384 for BAAI/bge-small-en-v1.5, 1536 for OpenAI text-embedding-3-small)
    tokenizer: "cl100k_base"         # Optionnal. Tokenizer to use for token counting. Use 'cl100k_base' for OpenAI models or 'none' for other models.
    max_tokens_per_request: 8000     # Maximum total tokens per API request (leave buffer below model limit)
    max_tokens_per_chunk: 8000       # Maximum tokens per individual chunk (should match model's context limit)
    api_key: "${OPENAI_API_KEY}"     # API key for the embedding service (required for OpenAI models)

  # State management configuration
  # Controls how document ingestion state is tracked
  state_management:
    database_path: ":memory:"  # Path to SQLite database file
    table_prefix: "qdrant_loader_"     # Prefix for database tables
    connection_pool:                   # Connection pool settings
      size: 5                         # Maximum number of connections
      timeout: 30                  # Connection timeout in seconds

# Multi-project configuration
projects:
  test-project:
    project_id: "test-project"
    display_name: "Test Project"
    description: "Test project for unit tests"
    sources:
      git:
        test-repo:
          source_type: "git"
          source: "test-repo"
          base_url: "https://github.com/test/repo.git"
          branch: "main"
          token: "test-token"
          include_paths:
            - "docs/**"
          file_types:
            - "*.md"